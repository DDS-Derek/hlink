# 为什么是hlink

## 什么是硬链接

直接翻看百度百科 [什么是硬链接？](https://baike.baidu.com/item/%E7%A1%AC%E9%93%BE%E6%8E%A5/2088758)

## 系统命令`cp -lr`的缺陷

大家都知道系统自带的命令`cp -lr`可以快速批量建立硬链接，但是它有以下几个问题

- 硬链建立后，如果硬链接改名，则又会被重复硬链
- 没有黑名单、白名单、缓存机制，只能一把梭
- 建立后，很难维护源文件和硬链接的关系，比如源文件删除后，很难找到硬链接的位置

## hlink的优势

- **重复检测**：`hlink` 重复检测是通过文件的`inode`号来进行检测，大家可以通过 `ls -i` 查看文件的`inode`。只要文件内容没有改变，则`inode`不会改变，刚好对应各种电影、动漫、电视剧视频文件的内容肯定是不会变更的，所以硬链接后则内容不会改变，那么`inode`不会改变，便可用于重复检测

![inode](/inode.png)

- **黑白名单机制**：如何过滤非视频文件，则可用黑白名单来进行管控需要硬链的文件，这样保证`PT种子`内部的文本文件不会被硬链过去，持续保种
- **缓存机制**：部分视频文件观看后，需要删除。但是不希望下次继续硬链过来，则可以打开缓存，再下次硬链时自动排除这些缓存的文件
- **更友好的提示**：硬链过程中，会有`进度提示`，失败后会有`错误提示`

![prompt](/prompt.png)

- **同步机制**：硬链创建后，可以通过`hlink prune`来同步源文件和硬链文件，更简单的管理它们，更详细的使用见[hlink prune介绍](../command/prune.md)
